<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Cinema - Shop</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<style>
			/* Remove the navbar's default margin-bottom and rounded borders */ 
			.navbar {
			  margin-bottom: 0;
			  border-radius: 0;
			}
			
			/* Add a gray background color and some padding to the footer */
			footer {
			  background-color: #f2f2f2;
			  padding: 25px;
			}
			
			.carousel-inner img {
			  width: 100%; /* Set width to 100% */
			  margin: auto;
			  min-height:200px;
			}

			/* Hide the carousel text when the screen is less than 600 pixels wide */
			@media (max-width: 600px) {
				.carousel-caption {
					display: none; 
					}
			}
			.item
			{
				max-height:300px;
			}
			.text-area
			{
				word-break: break-all;
			}
		</style>
		<script>
			var groceryData, groceryDataLength;
			function init()
			{
				$.ajax({
		        url: "http://140.121.196.23:4103/getGrocery",
				data:
				{
					userID : 1
				},
				type:"GET",
		        success: function (response) 
		        {
					//trans string to jsonarray
					groceryData = $.parseJSON(response);
					
					//data's length
					groceryDataLength = groceryData.length;
					
					//set shop slide (total 5 slide pages) in id=grocerySlider
					//clear the slide area and set content
					$("#grocerySlider").html('');
					for(var i = 0;i < 5;i++)
					{
						var random = Math.floor((Math.random() * groceryDataLength));
						if(i == 0)
							$("#grocerySlider").append('<div class="item active"  data-toggle="modal" data-target="#GoodsModal" onclick=setGoodsModal('+random+')><img src="'+groceryData[random].img_url+'" alt="'+groceryData[random].name+'"><div class="carousel-caption"><h3>'+groceryData[random].name+'</h3><p>Click to info.</p></div></div>');
						else
							$("#grocerySlider").append('<div class="item"  data-toggle="modal" data-target="#GoodsModal" onclick=setGoodsModal('+random+')><img src="'+groceryData[random].img_url+'" alt="'+groceryData[random].name+'"><div class="carousel-caption"><h3>'+groceryData[random].name+'</h3><p>Click to info.</p></div></div>');
					}
					
					//set goods content(total 2 rows and 3 goods per row) in id=row1, row2
					//clear row1 and set content
					$("#row1").html('');
					for(var i = 0;i < 3;i++)
					{
						var random = Math.floor((Math.random() * groceryDataLength));
						$("#row1").append('<div class="col-sm-4" data-toggle="modal" data-target="#GoodsModal" onclick=setGoodsModal('+random+')><div class="panel panel-primary"><div class="panel-heading">New! $'+groceryData[random].price+'</div><div class="panel-body"><img src="'+groceryData[random].img_url+'" class="img-responsive" style="width:100%" alt="'+groceryData[random].name+'"></div><div class="panel-footer">'+groceryData[random].name+'</div></div></div>');
					}
					//clear row2 and set content
					$("#row2").html('');
					for(var i = 0;i < 3;i++)
					{
						var random = Math.floor((Math.random() * groceryDataLength));
						$("#row2").append('<div class="col-sm-4" data-toggle="modal" data-target="#GoodsModal" onclick=setGoodsModal('+random+')><div class="panel panel-primary"><div class="panel-heading">New! $'+groceryData[random].price+'</div><div class="panel-body"><img src="'+groceryData[random].img_url+'" class="img-responsive" style="width:100%" alt="'+groceryData[random].name+'"></div><div class="panel-footer">'+groceryData[random].name+'</div></div></div>');
					}
					
					//set the goodslist
					//clear the goodslist
					$('#goodsList').html('');
					for(var i = 0;i < groceryDataLength;i++)
					{
						$('#goodsList').append('<a href="#" class="list-group-item"><div class="container text-center"><div class="row"><div class="col-sm-3"><img src="'+groceryData[i].img_url+'" class="img-responsive" style="width:100%" alt="'+groceryData[i].name+'"><p>$ '+groceryData[i].price+'</p></div><div class="col-sm-5 text-area">'+groceryData[i].name+'</div></div></div></a>');
					}
		        },
		        dataType: "text",
		        cache: false
		        });
			}
			function setGoodsModal(i)
			{
				//change the info in goods modal
				$('#modalContent').html('<div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">$ '+groceryData[i].price+'</h4></div><div class="modal-body"><img src="'+groceryData[i].img_url+'" class="img-responsive" style="width:100%" alt="Something"><p>'+groceryData[i].name+'</p></div>')
			}
		</script>
	</head>
	<body onload=init()>
		<!--Header-->
		<nav class="navbar navbar-inverse">
			<div class="container-fluid">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>                        
					</button>
					<a class="navbar-brand" href="#">Cinema</a>
				</div>
				<div class="collapse navbar-collapse" id="myNavbar">
					<ul class="nav navbar-nav">
						<li><a href="index.html">Home</a></li>
						<li class="active"><a href="shop.html">Shop</a></li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li><a href="#"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
						<li><a href="#" data-toggle="modal" data-target="#LoginModal"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
						<li>
							<div class="dropdown">
								<button class="btn dropdown-toggle" type="button" data-toggle="dropdown"><span class="glyphicon glyphicon-envelope"></span></button>
								<ul class="dropdown-menu">
									<li><a href="#">Notification1</a></li>
									<li><a href="#">Notification2</a></li>
									<li><a href="#">Notification3</a></li>
								</ul>
							</div> 
						</li>
					</ul>
				</div>
			</div>
		</nav>

		<!--Shop Slide-->
		<div id="myCarousel" class="carousel slide" data-ride="carousel">
			<!-- Indicators -->
			<ol class="carousel-indicators">
				<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
				<li data-target="#myCarousel" data-slide-to="1"></li>
				<li data-target="#myCarousel" data-slide-to="2"></li>
				<li data-target="#myCarousel" data-slide-to="3"></li>
				<li data-target="#myCarousel" data-slide-to="4"></li>
				
			</ol>
			<!-- Wrapper for slides -->
			<div id="grocerySlider" class="carousel-inner" role="listbox">
				
			</div>

			<!-- Left and right controls -->
			<a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
				<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
				<span class="sr-only">Previous</span>
			</a>
			<a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
				<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
				<span class="sr-only">Next</span>
			</a>
		</div><br><br>
  
		<!--Goods Content-->
		<div class="container">    
			<div class="row" id="row1">
				<div class="col-sm-4">
					<div class="panel panel-primary">
						<div class="panel-heading">New!</div>
						<div class="panel-body"><img src="https://placehold.it/150x80?text=IMAGE" class="img-responsive" style="width:100%" alt="Image"></div>
						<div class="panel-footer">Some intro.</div>
					</div>
				</div>
				<div class="col-sm-4"> 
					<div class="panel panel-danger">
						<div class="panel-heading">New!</div>
						<div class="panel-body"><img src="https://placehold.it/150x80?text=IMAGE" class="img-responsive" style="width:100%" alt="Image"></div>
						<div class="panel-footer">Some intro.</div>
					</div>
				</div>
				<div class="col-sm-4"> 
					<div class="panel panel-success">
						<div class="panel-heading">New!</div>
						<div class="panel-body"><img src="https://placehold.it/150x80?text=IMAGE" class="img-responsive" style="width:100%" alt="Image"></div>
						<div class="panel-footer">Some intro.</div>
					</div>
				</div>
			</div><br>
			<div class="row" id="row2">
				<div class="col-sm-4">
					<div class="panel panel-primary">
						<div class="panel-heading">New!</div>
						<div class="panel-body"><img src="https://placehold.it/150x80?text=IMAGE" class="img-responsive" style="width:100%" alt="Image"></div>
						<div class="panel-footer">Some intro.</div>
					</div>
				</div>
				<div class="col-sm-4"> 
					<div class="panel panel-primary">
						<div class="panel-heading">New!</div>
						<div class="panel-body"><img src="https://placehold.it/150x80?text=IMAGE" class="img-responsive" style="width:100%" alt="Image"></div>
						<div class="panel-footer">Some intro.</div>
					</div>
				</div>
				<div class="col-sm-4"> 
					<div class="panel panel-primary">
						<div class="panel-heading">New!</div>
						<div class="panel-body"><img src="https://placehold.it/150x80?text=IMAGE" class="img-responsive" style="width:100%" alt="Image"></div>
						<div class="panel-footer">Some intro.</div>
					</div>
				</div>
			</div><br>
			<div class="row">
				
				<div class="col-sm-4">
				</div>
				<div class="col-sm-4">
					<button type="button" class="btn btn-default btn-block" data-toggle="modal" data-target="#GoodsListModal">See more</button> 
				</div>
				<div class="col-sm-4">
				</div>
			</div>
		</div><br>

		<!-- Goods Info Modal -->
		<div id="GoodsModal" class="modal fade" role="dialog">
			<div class="modal-dialog modal-lg">

				<!-- Modal content-->
				<div class="modal-content" id="modalContent">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Name</h4>
					</div>
					<div class="modal-body">
						<img src="https://placehold.it/500x300?text=Something" class="img-responsive" style="width:100%" alt="Something">
						<p>Something about the goods.</p>
					</div>
				</div>

			</div>
		</div>
		
		<!-- Login Modal -->
		<div id="LoginModal" class="modal fade" role="dialog">
			<div class="modal-dialog modal-lg">

				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Login</h4>
					</div>
					<div class="modal-body">
						<form>
							<div class="input-group">
								<span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
								<input id="email" type="text" class="form-control" name="email" placeholder="Email">
							</div>
							<div class="input-group">
								<span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
								<input id="password" type="password" class="form-control" name="password" placeholder="Password">
							</div>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Login</button>
					</div>
				</div>

			</div>
		</div>
		
		<!--Shops List Modal-->
		<div id="GoodsListModal" class="modal fade" role="dialog">
			<div class="modal-dialog modal-lg">

				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">GoodsList</h4>
					</div>
					<div class="modal-body">
						<div class="list-group" id="goodsList">
							<a href="#" class="list-group-item">
								<div class="container text-center"> 
									<div class="row">
										<div class="col-sm-3">
											<img src="https://placehold.it/150x80?text=Something" class="img-responsive" style="width:100%" alt="Something">
											<p>Name</p>
										</div>
									
										<div class="col-sm-9">
										Intro.
										</div>
									</div>
								</div>
							</a>
							<a href="#" class="list-group-item">
								<div class="container text-center"> 
									<div class="row">
										<div class="col-sm-3">
											<img src="https://placehold.it/150x80?text=Something" class="img-responsive" style="width:100%" alt="Something">
											<p>Name</p>
										</div>
									
										<div class="col-sm-9">
										Intro.
										</div>
									</div>
								</div>
							</a>
							<a href="#" class="list-group-item">
								<div class="container text-center"> 
									<div class="row">
										<div class="col-sm-3">
											<img src="https://placehold.it/150x80?text=Something" class="img-responsive" style="width:100%" alt="Something">
											<p>Name</p>
										</div>
									
										<div class="col-sm-9">
										Intro.
										</div>
									</div>
								</div>
							</a>
						</div>
					</div>
					<div class="modal-footer">
						<a href="buy.html" class="btn btn-default">確定購買</a>
						<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
					</div>
				</div>

			</div>
		</div>
		
		<!--Footer-->
		<footer class="container-fluid text-center">
			<p>2018 - Copyright / Contact us:1234-5678</p>
		</footer>

	</body>
</html>
